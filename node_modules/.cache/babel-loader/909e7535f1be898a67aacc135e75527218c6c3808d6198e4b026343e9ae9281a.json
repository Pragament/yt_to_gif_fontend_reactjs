{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ksais\\\\OneDrive\\\\Desktop\\\\YOTUBE\\\\frontend\\\\yt_to_gif_fontend_reactjs\\\\src\\\\components\\\\VideoPreview.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState, memo } from 'react';\nimport ReactPlayer from 'react-player';\nimport './VideoPreview.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction VideoPreviewComponent({\n  videoUrl,\n  videoStatus,\n  onDimensionsChange,\n  lineOverlays,\n  dragEnabled = false,\n  dragRegions = [],\n  onDragRegionsChange,\n  videoDimensions,\n  onLinePositionUpdate,\n  onLineAdd,\n  cropMethod\n}) {\n  _s();\n  var _lineOverlays$horizon, _lineOverlays$vertica;\n  const playerRef = useRef(null);\n  const containerRef = useRef(null);\n  const videoElementRef = useRef(null);\n  const [videoBounds, setVideoBounds] = useState({\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n    scaleX: 1,\n    scaleY: 1\n  });\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragStart, setDragStart] = useState(null);\n  const [currentDrag, setCurrentDrag] = useState(null);\n\n  // Line dragging state\n  const [draggingLineType, setDraggingLineType] = useState(null);\n  const [draggingLineIndex, setDraggingLineIndex] = useState(null);\n  const [draggingLinePart, setDraggingLinePart] = useState(null); // 'position', 'start', 'end'\n\n  // New line creation state\n  const [creatingLine, setCreatingLine] = useState(false);\n  const [newLineStart, setNewLineStart] = useState(null);\n  const [newLinePreview, setNewLinePreview] = useState(null);\n  const [newLineType, setNewLineType] = useState(null);\n  const boundsInitializedRef = useRef(false);\n\n  /* =========================================\n     Capture video element + natural dimensions\n  ========================================= */\n  useEffect(() => {\n    if (!videoUrl || !playerRef.current) return;\n    const detectVideo = () => {\n      var _player$querySelector;\n      const player = playerRef.current.getInternalPlayer();\n      const video = (player === null || player === void 0 ? void 0 : player.tagName) === 'VIDEO' ? player : player === null || player === void 0 ? void 0 : (_player$querySelector = player.querySelector) === null || _player$querySelector === void 0 ? void 0 : _player$querySelector.call(player, 'video');\n      if (video && video.videoWidth && video.videoHeight) {\n        videoElementRef.current = video;\n        onDimensionsChange({\n          width: video.videoWidth,\n          height: video.videoHeight\n        });\n      }\n    };\n    detectVideo();\n    const observer = new MutationObserver(detectVideo);\n    if (containerRef.current) {\n      observer.observe(containerRef.current, {\n        childList: true,\n        subtree: true\n      });\n    }\n    return () => observer.disconnect();\n  }, [videoUrl, onDimensionsChange]);\n\n  /* =========================================\n     Calculate rendered video bounds (ONCE)\n  ========================================= */\n  const calculateVideoBounds = () => {\n    var _videoElementRef$curr;\n    if (!containerRef.current || !videoDimensions.width || !videoDimensions.height) return;\n    const containerRect = containerRef.current.getBoundingClientRect();\n    const videoRect = (_videoElementRef$curr = videoElementRef.current) === null || _videoElementRef$curr === void 0 ? void 0 : _videoElementRef$curr.getBoundingClientRect();\n    let x, y, width, height;\n    if (videoRect !== null && videoRect !== void 0 && videoRect.width && videoRect !== null && videoRect !== void 0 && videoRect.height) {\n      x = videoRect.left - containerRect.left;\n      y = videoRect.top - containerRect.top;\n      width = videoRect.width;\n      height = videoRect.height;\n    } else {\n      const videoAspect = videoDimensions.width / videoDimensions.height;\n      const containerAspect = containerRect.width / containerRect.height;\n      if (videoAspect > containerAspect) {\n        width = containerRect.width;\n        height = width / videoAspect;\n        x = 0;\n        y = (containerRect.height - height) / 2;\n      } else {\n        height = containerRect.height;\n        width = height * videoAspect;\n        x = (containerRect.width - width) / 2;\n        y = 0;\n      }\n    }\n    const scaleX = width / videoDimensions.width;\n    const scaleY = height / videoDimensions.height;\n    setVideoBounds({\n      x,\n      y,\n      width,\n      height,\n      scaleX,\n      scaleY\n    });\n    boundsInitializedRef.current = true;\n  };\n  useEffect(() => {\n    if (!videoUrl || !videoDimensions.width || !videoDimensions.height) {\n      boundsInitializedRef.current = false;\n      return;\n    }\n    setTimeout(calculateVideoBounds, 200);\n    window.addEventListener('resize', calculateVideoBounds);\n    return () => window.removeEventListener('resize', calculateVideoBounds);\n  }, [videoUrl, videoDimensions.width, videoDimensions.height]);\n\n  /* =========================================\n     Coordinate conversion (screen → video px)\n  ========================================= */\n  const screenToVideoCoords = (clientX, clientY) => {\n    const rect = containerRef.current.getBoundingClientRect();\n    const x = (clientX - rect.left - videoBounds.x) / videoBounds.scaleX;\n    const y = (clientY - rect.top - videoBounds.y) / videoBounds.scaleY;\n    return {\n      x: Math.max(0, Math.min(videoDimensions.width, x)),\n      y: Math.max(0, Math.min(videoDimensions.height, y))\n    };\n  };\n\n  /* =========================================\n     Drag handlers\n  ========================================= */\n  const handleMouseDown = e => {\n    if (e.button !== 0) return;\n\n    // Check if clicking on a line (for line-based cropping)\n    if (cropMethod === 'lines' && lineOverlays && videoBounds.width > 0) {\n      const rect = containerRef.current.getBoundingClientRect();\n      const clickX = e.clientX - rect.left - videoBounds.x;\n      const clickY = e.clientY - rect.top - videoBounds.y;\n      const videoClickX = clickX / videoBounds.scaleX;\n      const videoClickY = clickY / videoBounds.scaleY;\n\n      // Check horizontal lines - prioritize endpoints\n      if (lineOverlays.horizontal) {\n        for (let i = 0; i < lineOverlays.horizontal.length; i++) {\n          const line = lineOverlays.horizontal[i];\n          const lineY = (typeof line === 'number' ? line : line.y) * videoBounds.scaleY;\n          const lineX1 = (typeof line === 'number' ? 0 : line.x1 || 0) * videoBounds.scaleX;\n          const lineX2 = (typeof line === 'number' ? videoDimensions.width : line.x2 || videoDimensions.width) * videoBounds.scaleX;\n\n          // Check endpoints first with larger hit area\n          const endpointHitArea = 12;\n          const lineHitArea = 10;\n          if (Math.abs(clickY - lineY) < endpointHitArea) {\n            // Check if clicking on start endpoint - prioritize\n            if (Math.abs(clickX - lineX1) < endpointHitArea) {\n              setDraggingLineType('horizontal');\n              setDraggingLineIndex(i);\n              setDraggingLinePart('start');\n              e.preventDefault();\n              e.stopPropagation();\n              return;\n            }\n            // Check if clicking on end endpoint - prioritize\n            if (Math.abs(clickX - lineX2) < endpointHitArea) {\n              setDraggingLineType('horizontal');\n              setDraggingLineIndex(i);\n              setDraggingLinePart('end');\n              e.preventDefault();\n              e.stopPropagation();\n              return;\n            }\n            // Check if clicking on line body (to move position)\n            if (clickX >= lineX1 && clickX <= lineX2) {\n              setDraggingLineType('horizontal');\n              setDraggingLineIndex(i);\n              setDraggingLinePart('position');\n              e.preventDefault();\n              e.stopPropagation();\n              return;\n            }\n          }\n        }\n      }\n\n      // Check vertical lines - prioritize endpoints\n      if (lineOverlays.vertical) {\n        for (let i = 0; i < lineOverlays.vertical.length; i++) {\n          const line = lineOverlays.vertical[i];\n          const lineX = (typeof line === 'number' ? line : line.x) * videoBounds.scaleX;\n          const lineY1 = (typeof line === 'number' ? 0 : line.y1 || 0) * videoBounds.scaleY;\n          const lineY2 = (typeof line === 'number' ? videoDimensions.height : line.y2 || videoDimensions.height) * videoBounds.scaleY;\n\n          // Check endpoints first with larger hit area\n          const endpointHitArea = 12;\n          const lineHitArea = 10;\n\n          // Check if clicking on start endpoint (top) - prioritize\n          if (Math.abs(clickX - lineX) < endpointHitArea && Math.abs(clickY - lineY1) < endpointHitArea) {\n            setDraggingLineType('vertical');\n            setDraggingLineIndex(i);\n            setDraggingLinePart('start');\n            e.preventDefault();\n            e.stopPropagation();\n            return;\n          }\n          // Check if clicking on end endpoint (bottom) - prioritize\n          if (Math.abs(clickX - lineX) < endpointHitArea && Math.abs(clickY - lineY2) < endpointHitArea) {\n            setDraggingLineType('vertical');\n            setDraggingLineIndex(i);\n            setDraggingLinePart('end');\n            e.preventDefault();\n            e.stopPropagation();\n            return;\n          }\n          // Check if clicking on line body (to move position)\n          if (Math.abs(clickX - lineX) < lineHitArea && clickY >= lineY1 && clickY <= lineY2) {\n            setDraggingLineType('vertical');\n            setDraggingLineIndex(i);\n            setDraggingLinePart('position');\n            e.preventDefault();\n            e.stopPropagation();\n            return;\n          }\n        }\n      }\n\n      // If not clicking on existing line, start creating a new line\n      if (onLineAdd) {\n        const start = screenToVideoCoords(e.clientX, e.clientY);\n        setNewLineStart(start);\n        setCreatingLine(true);\n        setNewLinePreview({\n          ...start\n        });\n        e.preventDefault();\n        e.stopPropagation();\n        return;\n      }\n    }\n\n    // Drag-based cropping\n    if (dragEnabled) {\n      const start = screenToVideoCoords(e.clientX, e.clientY);\n      setDragStart(start);\n      setCurrentDrag({\n        ...start,\n        width: 0,\n        height: 0\n      });\n      setIsDragging(true);\n    }\n  };\n  const handleMouseMove = e => {\n    // Handle line dragging (existing lines)\n    if (draggingLineType && draggingLineIndex !== null && draggingLinePart && onLinePositionUpdate) {\n      const videoCoords = screenToVideoCoords(e.clientX, e.clientY);\n      if (draggingLineType === 'horizontal') {\n        if (draggingLinePart === 'position') {\n          // Move line vertically\n          const newY = Math.max(0, Math.min(videoDimensions.height, videoCoords.y));\n          onLinePositionUpdate('horizontal', draggingLineIndex, {\n            y: newY\n          });\n        } else if (draggingLinePart === 'start') {\n          // Adjust left endpoint\n          const newX1 = Math.max(0, Math.min(videoDimensions.width, videoCoords.x));\n          onLinePositionUpdate('horizontal', draggingLineIndex, {\n            x1: newX1\n          });\n        } else if (draggingLinePart === 'end') {\n          // Adjust right endpoint\n          const newX2 = Math.max(0, Math.min(videoDimensions.width, videoCoords.x));\n          onLinePositionUpdate('horizontal', draggingLineIndex, {\n            x2: newX2\n          });\n        }\n      } else if (draggingLineType === 'vertical') {\n        if (draggingLinePart === 'position') {\n          // Move line horizontally\n          const newX = Math.max(0, Math.min(videoDimensions.width, videoCoords.x));\n          onLinePositionUpdate('vertical', draggingLineIndex, {\n            x: newX\n          });\n        } else if (draggingLinePart === 'start') {\n          // Adjust top endpoint\n          const newY1 = Math.max(0, Math.min(videoDimensions.height, videoCoords.y));\n          onLinePositionUpdate('vertical', draggingLineIndex, {\n            y1: newY1\n          });\n        } else if (draggingLinePart === 'end') {\n          // Adjust bottom endpoint\n          const newY2 = Math.max(0, Math.min(videoDimensions.height, videoCoords.y));\n          onLinePositionUpdate('vertical', draggingLineIndex, {\n            y2: newY2\n          });\n        }\n      }\n      return;\n    }\n\n    // Handle new line creation\n    if (creatingLine && newLineStart) {\n      const current = screenToVideoCoords(e.clientX, e.clientY);\n      const deltaX = Math.abs(current.x - newLineStart.x);\n      const deltaY = Math.abs(current.y - newLineStart.y);\n\n      // Determine line type based on drag direction (more horizontal = horizontal line, more vertical = vertical line)\n      if (deltaX > 20 || deltaY > 20) {\n        if (deltaX > deltaY) {\n          // More horizontal movement = create horizontal line segment\n          setNewLineType('horizontal');\n          setNewLinePreview({\n            y: current.y,\n            x1: Math.min(newLineStart.x, current.x),\n            x2: Math.max(newLineStart.x, current.x)\n          });\n        } else {\n          // More vertical movement = create vertical line segment\n          setNewLineType('vertical');\n          setNewLinePreview({\n            x: current.x,\n            y1: Math.min(newLineStart.y, current.y),\n            y2: Math.max(newLineStart.y, current.y)\n          });\n        }\n      } else {\n        // Not enough movement yet, keep preview at start position\n        setNewLinePreview({\n          ...newLineStart\n        });\n      }\n      return;\n    }\n\n    // Drag-based cropping\n    if (isDragging && dragStart) {\n      const current = screenToVideoCoords(e.clientX, e.clientY);\n      setCurrentDrag({\n        x: Math.min(dragStart.x, current.x),\n        y: Math.min(dragStart.y, current.y),\n        width: Math.abs(current.x - dragStart.x),\n        height: Math.abs(current.y - dragStart.y)\n      });\n    }\n  };\n  const handleMouseUp = () => {\n    // End line dragging (existing lines)\n    if (draggingLineType !== null) {\n      setDraggingLineType(null);\n      setDraggingLineIndex(null);\n      setDraggingLinePart(null);\n      return;\n    }\n\n    // Finish creating new line\n    if (creatingLine && newLinePreview && newLineType && onLineAdd) {\n      if (newLineType === 'horizontal' && newLinePreview.y !== undefined) {\n        const y = Math.max(0, Math.min(videoDimensions.height, newLinePreview.y));\n        const x1 = Math.max(0, Math.min(videoDimensions.width, newLinePreview.x1 || 0));\n        const x2 = Math.max(0, Math.min(videoDimensions.width, newLinePreview.x2 || videoDimensions.width));\n        onLineAdd('horizontal', {\n          y,\n          x1,\n          x2\n        });\n      } else if (newLineType === 'vertical' && newLinePreview.x !== undefined) {\n        const x = Math.max(0, Math.min(videoDimensions.width, newLinePreview.x));\n        const y1 = Math.max(0, Math.min(videoDimensions.height, newLinePreview.y1 || 0));\n        const y2 = Math.max(0, Math.min(videoDimensions.height, newLinePreview.y2 || videoDimensions.height));\n        onLineAdd('vertical', {\n          x,\n          y1,\n          y2\n        });\n      }\n      setCreatingLine(false);\n      setNewLineStart(null);\n      setNewLinePreview(null);\n      setNewLineType(null);\n      return;\n    }\n\n    // Cancel line creation if not enough movement\n    if (creatingLine) {\n      setCreatingLine(false);\n      setNewLineStart(null);\n      setNewLinePreview(null);\n      setNewLineType(null);\n      return;\n    }\n\n    // Drag-based cropping\n    if (isDragging && (currentDrag === null || currentDrag === void 0 ? void 0 : currentDrag.width) > 10 && (currentDrag === null || currentDrag === void 0 ? void 0 : currentDrag.height) > 10) {\n      onDragRegionsChange === null || onDragRegionsChange === void 0 ? void 0 : onDragRegionsChange([...dragRegions, {\n        x: Math.round(currentDrag.x),\n        y: Math.round(currentDrag.y),\n        width: Math.round(currentDrag.width),\n        height: Math.round(currentDrag.height)\n      }]);\n    }\n    setIsDragging(false);\n    setDragStart(null);\n    setCurrentDrag(null);\n  };\n  const removeDragRegion = index => onDragRegionsChange === null || onDragRegionsChange === void 0 ? void 0 : onDragRegionsChange(dragRegions.filter((_, i) => i !== index));\n\n  /* =========================================\n     Placeholder\n  ========================================= */\n  if (!videoUrl || (videoStatus === null || videoStatus === void 0 ? void 0 : videoStatus.status) !== 'ready') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card video-preview-placeholder\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Video Preview\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"placeholder-content\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Download or upload a video to see preview\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 7\n    }, this);\n  }\n\n  /* =========================================\n     Render\n  ========================================= */\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card video-preview\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Video Preview\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef,\n      className: `video-container ${dragEnabled ? 'drag-enabled' : ''} ${cropMethod === 'lines' ? 'lines-enabled' : ''}`,\n      onMouseDown: handleMouseDown,\n      onMouseMove: handleMouseMove,\n      onMouseUp: handleMouseUp,\n      onMouseLeave: handleMouseUp,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"video-overlay-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(ReactPlayer, {\n          ref: playerRef,\n          url: videoUrl,\n          controls: true,\n          width: \"100%\",\n          height: \"100%\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 11\n        }, this), cropMethod === 'lines' && lineOverlays && videoBounds.width > 0 && videoBounds.height > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"line-overlays\",\n          style: {\n            left: videoBounds.x,\n            top: videoBounds.y,\n            width: videoBounds.width,\n            height: videoBounds.height\n          },\n          children: [(_lineOverlays$horizon = lineOverlays.horizontal) === null || _lineOverlays$horizon === void 0 ? void 0 : _lineOverlays$horizon.map((line, i) => {\n            const lineData = typeof line === 'number' ? {\n              y: line,\n              x1: 0,\n              x2: videoDimensions.width\n            } : line;\n            const isDragging = draggingLineIndex === i && draggingLineType === 'horizontal';\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: `overlay-line horizontal-line ${isDragging ? 'dragging' : ''}`,\n                style: {\n                  top: lineData.y * videoBounds.scaleY,\n                  left: lineData.x1 * videoBounds.scaleX,\n                  width: (lineData.x2 - lineData.x1) * videoBounds.scaleX,\n                  cursor: isDragging && draggingLinePart === 'position' ? 'ns-resize' : 'default'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 478,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `line-endpoint line-endpoint-start ${isDragging && draggingLinePart === 'start' ? 'dragging' : ''}`,\n                style: {\n                  left: lineData.x1 * videoBounds.scaleX - 5,\n                  top: lineData.y * videoBounds.scaleY - 5,\n                  cursor: 'ew-resize',\n                  zIndex: 20\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 488,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `line-endpoint line-endpoint-end ${isDragging && draggingLinePart === 'end' ? 'dragging' : ''}`,\n                style: {\n                  left: lineData.x2 * videoBounds.scaleX - 5,\n                  top: lineData.y * videoBounds.scaleY - 5,\n                  cursor: 'ew-resize',\n                  zIndex: 20\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 498,\n                columnNumber: 21\n              }, this)]\n            }, `h-${i}`, true, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 19\n            }, this);\n          }), (_lineOverlays$vertica = lineOverlays.vertical) === null || _lineOverlays$vertica === void 0 ? void 0 : _lineOverlays$vertica.map((line, i) => {\n            const lineData = typeof line === 'number' ? {\n              x: line,\n              y1: 0,\n              y2: videoDimensions.height\n            } : line;\n            const isDragging = draggingLineIndex === i && draggingLineType === 'vertical';\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: `overlay-line vertical-line ${isDragging ? 'dragging' : ''}`,\n                style: {\n                  left: lineData.x * videoBounds.scaleX,\n                  top: lineData.y1 * videoBounds.scaleY,\n                  height: (lineData.y2 - lineData.y1) * videoBounds.scaleY,\n                  cursor: isDragging && draggingLinePart === 'position' ? 'ew-resize' : 'default'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 515,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `line-endpoint line-endpoint-start ${isDragging && draggingLinePart === 'start' ? 'dragging' : ''}`,\n                style: {\n                  left: lineData.x * videoBounds.scaleX - 5,\n                  top: lineData.y1 * videoBounds.scaleY - 5,\n                  cursor: 'ns-resize',\n                  zIndex: 25\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 525,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `line-endpoint line-endpoint-end ${isDragging && draggingLinePart === 'end' ? 'dragging' : ''}`,\n                style: {\n                  left: lineData.x * videoBounds.scaleX - 5,\n                  top: Math.min(lineData.y2 * videoBounds.scaleY - 5, videoBounds.height - 5),\n                  cursor: 'ns-resize',\n                  zIndex: 25,\n                  position: 'absolute'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 535,\n                columnNumber: 21\n              }, this)]\n            }, `v-${i}`, true, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 19\n            }, this);\n          }), creatingLine && newLinePreview && newLineType && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [newLineType === 'horizontal' && newLinePreview.y !== undefined && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"overlay-line horizontal-line creating\",\n                style: {\n                  top: newLinePreview.y * videoBounds.scaleY,\n                  left: (newLinePreview.x1 || 0) * videoBounds.scaleX,\n                  width: ((newLinePreview.x2 || videoDimensions.width) - (newLinePreview.x1 || 0)) * videoBounds.scaleX\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 554,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"line-endpoint line-endpoint-start creating\",\n                style: {\n                  left: (newLinePreview.x1 || 0) * videoBounds.scaleX - 4,\n                  top: newLinePreview.y * videoBounds.scaleY - 4\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 562,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"line-endpoint line-endpoint-end creating\",\n                style: {\n                  left: (newLinePreview.x2 || videoDimensions.width) * videoBounds.scaleX - 4,\n                  top: newLinePreview.y * videoBounds.scaleY - 4\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 569,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true), newLineType === 'vertical' && newLinePreview.x !== undefined && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"overlay-line vertical-line creating\",\n                style: {\n                  left: newLinePreview.x * videoBounds.scaleX,\n                  top: (newLinePreview.y1 || 0) * videoBounds.scaleY,\n                  height: ((newLinePreview.y2 || videoDimensions.height) - (newLinePreview.y1 || 0)) * videoBounds.scaleY\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 580,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"line-endpoint line-endpoint-start creating\",\n                style: {\n                  left: newLinePreview.x * videoBounds.scaleX - 4,\n                  top: (newLinePreview.y1 || 0) * videoBounds.scaleY - 4\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 588,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"line-endpoint line-endpoint-end creating\",\n                style: {\n                  left: newLinePreview.x * videoBounds.scaleX - 4,\n                  top: (newLinePreview.y2 || videoDimensions.height) * videoBounds.scaleY - 4\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 595,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 13\n        }, this), dragEnabled && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"drag-overlays\",\n          style: {\n            left: videoBounds.x,\n            top: videoBounds.y,\n            width: videoBounds.width,\n            height: videoBounds.height\n          },\n          children: [dragRegions.map((r, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"drag-region\",\n            style: {\n              left: r.x * videoBounds.scaleX,\n              top: r.y * videoBounds.scaleY,\n              width: r.width * videoBounds.scaleX,\n              height: r.height * videoBounds.scaleY\n            },\n            onContextMenu: e => {\n              e.preventDefault();\n              removeDragRegion(i);\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"drag-region-label\",\n              children: i + 1\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 635,\n              columnNumber: 19\n            }, this)\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 621,\n            columnNumber: 17\n          }, this)), isDragging && currentDrag && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"drag-region dragging\",\n            style: {\n              left: currentDrag.x * videoBounds.scaleX,\n              top: currentDrag.y * videoBounds.scaleY,\n              width: currentDrag.width * videoBounds.scaleX,\n              height: currentDrag.height * videoBounds.scaleY\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 640,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 611,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 441,\n    columnNumber: 5\n  }, this);\n}\n_s(VideoPreviewComponent, \"flJlpofm5/qGNAdooFVNLcopzYw=\");\n_c = VideoPreviewComponent;\nexport default _c2 = /*#__PURE__*/memo(VideoPreviewComponent);\nvar _c, _c2;\n$RefreshReg$(_c, \"VideoPreviewComponent\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","useRef","useEffect","useState","memo","ReactPlayer","jsxDEV","_jsxDEV","Fragment","_Fragment","VideoPreviewComponent","videoUrl","videoStatus","onDimensionsChange","lineOverlays","dragEnabled","dragRegions","onDragRegionsChange","videoDimensions","onLinePositionUpdate","onLineAdd","cropMethod","_s","_lineOverlays$horizon","_lineOverlays$vertica","playerRef","containerRef","videoElementRef","videoBounds","setVideoBounds","x","y","width","height","scaleX","scaleY","isDragging","setIsDragging","dragStart","setDragStart","currentDrag","setCurrentDrag","draggingLineType","setDraggingLineType","draggingLineIndex","setDraggingLineIndex","draggingLinePart","setDraggingLinePart","creatingLine","setCreatingLine","newLineStart","setNewLineStart","newLinePreview","setNewLinePreview","newLineType","setNewLineType","boundsInitializedRef","current","detectVideo","_player$querySelector","player","getInternalPlayer","video","tagName","querySelector","call","videoWidth","videoHeight","observer","MutationObserver","observe","childList","subtree","disconnect","calculateVideoBounds","_videoElementRef$curr","containerRect","getBoundingClientRect","videoRect","left","top","videoAspect","containerAspect","setTimeout","window","addEventListener","removeEventListener","screenToVideoCoords","clientX","clientY","rect","Math","max","min","handleMouseDown","e","button","clickX","clickY","videoClickX","videoClickY","horizontal","i","length","line","lineY","lineX1","x1","lineX2","x2","endpointHitArea","lineHitArea","abs","preventDefault","stopPropagation","vertical","lineX","lineY1","y1","lineY2","y2","start","handleMouseMove","videoCoords","newY","newX1","newX2","newX","newY1","newY2","deltaX","deltaY","handleMouseUp","undefined","round","removeDragRegion","index","filter","_","status","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","url","controls","style","map","lineData","cursor","zIndex","position","r","onContextMenu","_c","_c2","$RefreshReg$"],"sources":["C:/Users/ksais/OneDrive/Desktop/YOTUBE/frontend/yt_to_gif_fontend_reactjs/src/components/VideoPreview.js"],"sourcesContent":["import React, { useRef, useEffect, useState, memo } from 'react';\nimport ReactPlayer from 'react-player';\nimport './VideoPreview.css';\n\nfunction VideoPreviewComponent({\n  videoUrl,\n  videoStatus,\n  onDimensionsChange,\n  lineOverlays,\n  dragEnabled = false,\n  dragRegions = [],\n  onDragRegionsChange,\n  videoDimensions,\n  onLinePositionUpdate,\n  onLineAdd,\n  cropMethod\n}) {\n  const playerRef = useRef(null);\n  const containerRef = useRef(null);\n  const videoElementRef = useRef(null);\n\n  const [videoBounds, setVideoBounds] = useState({\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n    scaleX: 1,\n    scaleY: 1\n  });\n\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragStart, setDragStart] = useState(null);\n  const [currentDrag, setCurrentDrag] = useState(null);\n\n  // Line dragging state\n  const [draggingLineType, setDraggingLineType] = useState(null);\n  const [draggingLineIndex, setDraggingLineIndex] = useState(null);\n  const [draggingLinePart, setDraggingLinePart] = useState(null); // 'position', 'start', 'end'\n  \n  // New line creation state\n  const [creatingLine, setCreatingLine] = useState(false);\n  const [newLineStart, setNewLineStart] = useState(null);\n  const [newLinePreview, setNewLinePreview] = useState(null);\n  const [newLineType, setNewLineType] = useState(null);\n\n  const boundsInitializedRef = useRef(false);\n\n  /* =========================================\n     Capture video element + natural dimensions\n  ========================================= */\n  useEffect(() => {\n    if (!videoUrl || !playerRef.current) return;\n\n    const detectVideo = () => {\n      const player = playerRef.current.getInternalPlayer();\n      const video =\n        player?.tagName === 'VIDEO'\n          ? player\n          : player?.querySelector?.('video');\n\n      if (video && video.videoWidth && video.videoHeight) {\n        videoElementRef.current = video;\n        onDimensionsChange({\n          width: video.videoWidth,\n          height: video.videoHeight\n        });\n      }\n    };\n\n    detectVideo();\n\n    const observer = new MutationObserver(detectVideo);\n    if (containerRef.current) {\n      observer.observe(containerRef.current, {\n        childList: true,\n        subtree: true\n      });\n    }\n\n    return () => observer.disconnect();\n  }, [videoUrl, onDimensionsChange]);\n\n  /* =========================================\n     Calculate rendered video bounds (ONCE)\n  ========================================= */\n  const calculateVideoBounds = () => {\n    if (!containerRef.current || !videoDimensions.width || !videoDimensions.height) return;\n\n    const containerRect = containerRef.current.getBoundingClientRect();\n    const videoRect = videoElementRef.current?.getBoundingClientRect();\n\n    let x, y, width, height;\n\n    if (videoRect?.width && videoRect?.height) {\n      x = videoRect.left - containerRect.left;\n      y = videoRect.top - containerRect.top;\n      width = videoRect.width;\n      height = videoRect.height;\n    } else {\n      const videoAspect = videoDimensions.width / videoDimensions.height;\n      const containerAspect = containerRect.width / containerRect.height;\n\n      if (videoAspect > containerAspect) {\n        width = containerRect.width;\n        height = width / videoAspect;\n        x = 0;\n        y = (containerRect.height - height) / 2;\n      } else {\n        height = containerRect.height;\n        width = height * videoAspect;\n        x = (containerRect.width - width) / 2;\n        y = 0;\n      }\n    }\n\n    const scaleX = width / videoDimensions.width;\n    const scaleY = height / videoDimensions.height;\n\n    setVideoBounds({\n      x,\n      y,\n      width,\n      height,\n      scaleX,\n      scaleY\n    });\n\n    boundsInitializedRef.current = true;\n  };\n\n  useEffect(() => {\n    if (!videoUrl || !videoDimensions.width || !videoDimensions.height) {\n      boundsInitializedRef.current = false;\n      return;\n    }\n\n    setTimeout(calculateVideoBounds, 200);\n    window.addEventListener('resize', calculateVideoBounds);\n\n    return () => window.removeEventListener('resize', calculateVideoBounds);\n  }, [videoUrl, videoDimensions.width, videoDimensions.height]);\n\n  /* =========================================\n     Coordinate conversion (screen → video px)\n  ========================================= */\n  const screenToVideoCoords = (clientX, clientY) => {\n    const rect = containerRef.current.getBoundingClientRect();\n\n    const x =\n      (clientX - rect.left - videoBounds.x) / videoBounds.scaleX;\n    const y =\n      (clientY - rect.top - videoBounds.y) / videoBounds.scaleY;\n\n    return {\n      x: Math.max(0, Math.min(videoDimensions.width, x)),\n      y: Math.max(0, Math.min(videoDimensions.height, y))\n    };\n  };\n\n  /* =========================================\n     Drag handlers\n  ========================================= */\n  const handleMouseDown = e => {\n    if (e.button !== 0) return;\n\n    // Check if clicking on a line (for line-based cropping)\n    if (cropMethod === 'lines' && lineOverlays && videoBounds.width > 0) {\n      const rect = containerRef.current.getBoundingClientRect();\n      const clickX = e.clientX - rect.left - videoBounds.x;\n      const clickY = e.clientY - rect.top - videoBounds.y;\n      const videoClickX = (clickX / videoBounds.scaleX);\n      const videoClickY = (clickY / videoBounds.scaleY);\n\n      // Check horizontal lines - prioritize endpoints\n      if (lineOverlays.horizontal) {\n        for (let i = 0; i < lineOverlays.horizontal.length; i++) {\n          const line = lineOverlays.horizontal[i];\n          const lineY = (typeof line === 'number' ? line : line.y) * videoBounds.scaleY;\n          const lineX1 = (typeof line === 'number' ? 0 : (line.x1 || 0)) * videoBounds.scaleX;\n          const lineX2 = (typeof line === 'number' ? videoDimensions.width : (line.x2 || videoDimensions.width)) * videoBounds.scaleX;\n          \n          // Check endpoints first with larger hit area\n          const endpointHitArea = 12;\n          const lineHitArea = 10;\n          \n          if (Math.abs(clickY - lineY) < endpointHitArea) {\n            // Check if clicking on start endpoint - prioritize\n            if (Math.abs(clickX - lineX1) < endpointHitArea) {\n              setDraggingLineType('horizontal');\n              setDraggingLineIndex(i);\n              setDraggingLinePart('start');\n              e.preventDefault();\n              e.stopPropagation();\n              return;\n            }\n            // Check if clicking on end endpoint - prioritize\n            if (Math.abs(clickX - lineX2) < endpointHitArea) {\n              setDraggingLineType('horizontal');\n              setDraggingLineIndex(i);\n              setDraggingLinePart('end');\n              e.preventDefault();\n              e.stopPropagation();\n              return;\n            }\n            // Check if clicking on line body (to move position)\n            if (clickX >= lineX1 && clickX <= lineX2) {\n              setDraggingLineType('horizontal');\n              setDraggingLineIndex(i);\n              setDraggingLinePart('position');\n              e.preventDefault();\n              e.stopPropagation();\n              return;\n            }\n          }\n        }\n      }\n\n      // Check vertical lines - prioritize endpoints\n      if (lineOverlays.vertical) {\n        for (let i = 0; i < lineOverlays.vertical.length; i++) {\n          const line = lineOverlays.vertical[i];\n          const lineX = (typeof line === 'number' ? line : line.x) * videoBounds.scaleX;\n          const lineY1 = (typeof line === 'number' ? 0 : (line.y1 || 0)) * videoBounds.scaleY;\n          const lineY2 = (typeof line === 'number' ? videoDimensions.height : (line.y2 || videoDimensions.height)) * videoBounds.scaleY;\n          \n          // Check endpoints first with larger hit area\n          const endpointHitArea = 12;\n          const lineHitArea = 10;\n          \n          // Check if clicking on start endpoint (top) - prioritize\n          if (Math.abs(clickX - lineX) < endpointHitArea && Math.abs(clickY - lineY1) < endpointHitArea) {\n            setDraggingLineType('vertical');\n            setDraggingLineIndex(i);\n            setDraggingLinePart('start');\n            e.preventDefault();\n            e.stopPropagation();\n            return;\n          }\n          // Check if clicking on end endpoint (bottom) - prioritize\n          if (Math.abs(clickX - lineX) < endpointHitArea && Math.abs(clickY - lineY2) < endpointHitArea) {\n            setDraggingLineType('vertical');\n            setDraggingLineIndex(i);\n            setDraggingLinePart('end');\n            e.preventDefault();\n            e.stopPropagation();\n            return;\n          }\n          // Check if clicking on line body (to move position)\n          if (Math.abs(clickX - lineX) < lineHitArea && clickY >= lineY1 && clickY <= lineY2) {\n            setDraggingLineType('vertical');\n            setDraggingLineIndex(i);\n            setDraggingLinePart('position');\n            e.preventDefault();\n            e.stopPropagation();\n            return;\n          }\n        }\n      }\n\n      // If not clicking on existing line, start creating a new line\n      if (onLineAdd) {\n        const start = screenToVideoCoords(e.clientX, e.clientY);\n        setNewLineStart(start);\n        setCreatingLine(true);\n        setNewLinePreview({ ...start });\n        e.preventDefault();\n        e.stopPropagation();\n        return;\n      }\n    }\n\n    // Drag-based cropping\n    if (dragEnabled) {\n      const start = screenToVideoCoords(e.clientX, e.clientY);\n      setDragStart(start);\n      setCurrentDrag({ ...start, width: 0, height: 0 });\n      setIsDragging(true);\n    }\n  };\n\n  const handleMouseMove = e => {\n    // Handle line dragging (existing lines)\n    if (draggingLineType && draggingLineIndex !== null && draggingLinePart && onLinePositionUpdate) {\n      const videoCoords = screenToVideoCoords(e.clientX, e.clientY);\n      \n      if (draggingLineType === 'horizontal') {\n        if (draggingLinePart === 'position') {\n          // Move line vertically\n          const newY = Math.max(0, Math.min(videoDimensions.height, videoCoords.y));\n          onLinePositionUpdate('horizontal', draggingLineIndex, { y: newY });\n        } else if (draggingLinePart === 'start') {\n          // Adjust left endpoint\n          const newX1 = Math.max(0, Math.min(videoDimensions.width, videoCoords.x));\n          onLinePositionUpdate('horizontal', draggingLineIndex, { x1: newX1 });\n        } else if (draggingLinePart === 'end') {\n          // Adjust right endpoint\n          const newX2 = Math.max(0, Math.min(videoDimensions.width, videoCoords.x));\n          onLinePositionUpdate('horizontal', draggingLineIndex, { x2: newX2 });\n        }\n      } else if (draggingLineType === 'vertical') {\n        if (draggingLinePart === 'position') {\n          // Move line horizontally\n          const newX = Math.max(0, Math.min(videoDimensions.width, videoCoords.x));\n          onLinePositionUpdate('vertical', draggingLineIndex, { x: newX });\n        } else if (draggingLinePart === 'start') {\n          // Adjust top endpoint\n          const newY1 = Math.max(0, Math.min(videoDimensions.height, videoCoords.y));\n          onLinePositionUpdate('vertical', draggingLineIndex, { y1: newY1 });\n        } else if (draggingLinePart === 'end') {\n          // Adjust bottom endpoint\n          const newY2 = Math.max(0, Math.min(videoDimensions.height, videoCoords.y));\n          onLinePositionUpdate('vertical', draggingLineIndex, { y2: newY2 });\n        }\n      }\n      return;\n    }\n\n    // Handle new line creation\n    if (creatingLine && newLineStart) {\n      const current = screenToVideoCoords(e.clientX, e.clientY);\n      const deltaX = Math.abs(current.x - newLineStart.x);\n      const deltaY = Math.abs(current.y - newLineStart.y);\n      \n      // Determine line type based on drag direction (more horizontal = horizontal line, more vertical = vertical line)\n      if (deltaX > 20 || deltaY > 20) {\n        if (deltaX > deltaY) {\n          // More horizontal movement = create horizontal line segment\n          setNewLineType('horizontal');\n          setNewLinePreview({ \n            y: current.y,\n            x1: Math.min(newLineStart.x, current.x),\n            x2: Math.max(newLineStart.x, current.x)\n          });\n        } else {\n          // More vertical movement = create vertical line segment\n          setNewLineType('vertical');\n          setNewLinePreview({ \n            x: current.x,\n            y1: Math.min(newLineStart.y, current.y),\n            y2: Math.max(newLineStart.y, current.y)\n          });\n        }\n      } else {\n        // Not enough movement yet, keep preview at start position\n        setNewLinePreview({ ...newLineStart });\n      }\n      return;\n    }\n\n    // Drag-based cropping\n    if (isDragging && dragStart) {\n      const current = screenToVideoCoords(e.clientX, e.clientY);\n\n      setCurrentDrag({\n        x: Math.min(dragStart.x, current.x),\n        y: Math.min(dragStart.y, current.y),\n        width: Math.abs(current.x - dragStart.x),\n        height: Math.abs(current.y - dragStart.y)\n      });\n    }\n  };\n\n  const handleMouseUp = () => {\n    // End line dragging (existing lines)\n    if (draggingLineType !== null) {\n      setDraggingLineType(null);\n      setDraggingLineIndex(null);\n      setDraggingLinePart(null);\n      return;\n    }\n\n    // Finish creating new line\n    if (creatingLine && newLinePreview && newLineType && onLineAdd) {\n      if (newLineType === 'horizontal' && newLinePreview.y !== undefined) {\n        const y = Math.max(0, Math.min(videoDimensions.height, newLinePreview.y));\n        const x1 = Math.max(0, Math.min(videoDimensions.width, newLinePreview.x1 || 0));\n        const x2 = Math.max(0, Math.min(videoDimensions.width, newLinePreview.x2 || videoDimensions.width));\n        onLineAdd('horizontal', { y, x1, x2 });\n      } else if (newLineType === 'vertical' && newLinePreview.x !== undefined) {\n        const x = Math.max(0, Math.min(videoDimensions.width, newLinePreview.x));\n        const y1 = Math.max(0, Math.min(videoDimensions.height, newLinePreview.y1 || 0));\n        const y2 = Math.max(0, Math.min(videoDimensions.height, newLinePreview.y2 || videoDimensions.height));\n        onLineAdd('vertical', { x, y1, y2 });\n      }\n      \n      setCreatingLine(false);\n      setNewLineStart(null);\n      setNewLinePreview(null);\n      setNewLineType(null);\n      return;\n    }\n\n    // Cancel line creation if not enough movement\n    if (creatingLine) {\n      setCreatingLine(false);\n      setNewLineStart(null);\n      setNewLinePreview(null);\n      setNewLineType(null);\n      return;\n    }\n\n    // Drag-based cropping\n    if (isDragging && currentDrag?.width > 10 && currentDrag?.height > 10) {\n      onDragRegionsChange?.([\n        ...dragRegions,\n        {\n          x: Math.round(currentDrag.x),\n          y: Math.round(currentDrag.y),\n          width: Math.round(currentDrag.width),\n          height: Math.round(currentDrag.height)\n        }\n      ]);\n    }\n\n    setIsDragging(false);\n    setDragStart(null);\n    setCurrentDrag(null);\n  };\n\n  const removeDragRegion = index =>\n    onDragRegionsChange?.(dragRegions.filter((_, i) => i !== index));\n\n  /* =========================================\n     Placeholder\n  ========================================= */\n  if (!videoUrl || videoStatus?.status !== 'ready') {\n    return (\n      <div className=\"card video-preview-placeholder\">\n        <h2>Video Preview</h2>\n        <div className=\"placeholder-content\">\n          <p>Download or upload a video to see preview</p>\n        </div>\n      </div>\n    );\n  }\n\n  /* =========================================\n     Render\n  ========================================= */\n  return (\n    <div className=\"card video-preview\">\n      <h2>Video Preview</h2>\n\n\n      <div\n        ref={containerRef}\n        className={`video-container ${dragEnabled ? 'drag-enabled' : ''} ${cropMethod === 'lines' ? 'lines-enabled' : ''}`}\n        onMouseDown={handleMouseDown}\n        onMouseMove={handleMouseMove}\n        onMouseUp={handleMouseUp}\n        onMouseLeave={handleMouseUp}\n      >\n        <div className=\"video-overlay-wrapper\">\n          <ReactPlayer\n            ref={playerRef}\n            url={videoUrl}\n            controls\n            width=\"100%\"\n            height=\"100%\"\n          />\n\n          {/* Line-based cropping */}\n          {cropMethod === 'lines' && lineOverlays && videoBounds.width > 0 && videoBounds.height > 0 && (\n            <div\n              className=\"line-overlays\"\n              style={{\n                left: videoBounds.x,\n                top: videoBounds.y,\n                width: videoBounds.width,\n                height: videoBounds.height\n              }}\n            >\n              {lineOverlays.horizontal?.map((line, i) => {\n                const lineData = typeof line === 'number' ? { y: line, x1: 0, x2: videoDimensions.width } : line;\n                const isDragging = draggingLineIndex === i && draggingLineType === 'horizontal';\n                return (\n                  <div key={`h-${i}`}>\n                    <div\n                      className={`overlay-line horizontal-line ${isDragging ? 'dragging' : ''}`}\n                      style={{ \n                        top: lineData.y * videoBounds.scaleY,\n                        left: lineData.x1 * videoBounds.scaleX,\n                        width: (lineData.x2 - lineData.x1) * videoBounds.scaleX,\n                        cursor: isDragging && draggingLinePart === 'position' ? 'ns-resize' : 'default'\n                      }}\n                    />\n                    {/* Start endpoint */}\n                    <div\n                      className={`line-endpoint line-endpoint-start ${isDragging && draggingLinePart === 'start' ? 'dragging' : ''}`}\n                      style={{\n                        left: lineData.x1 * videoBounds.scaleX - 5,\n                        top: lineData.y * videoBounds.scaleY - 5,\n                        cursor: 'ew-resize',\n                        zIndex: 20\n                      }}\n                    />\n                    {/* End endpoint */}\n                    <div\n                      className={`line-endpoint line-endpoint-end ${isDragging && draggingLinePart === 'end' ? 'dragging' : ''}`}\n                      style={{\n                        left: lineData.x2 * videoBounds.scaleX - 5,\n                        top: lineData.y * videoBounds.scaleY - 5,\n                        cursor: 'ew-resize',\n                        zIndex: 20\n                      }}\n                    />\n                  </div>\n                );\n              })}\n              {lineOverlays.vertical?.map((line, i) => {\n                const lineData = typeof line === 'number' ? { x: line, y1: 0, y2: videoDimensions.height } : line;\n                const isDragging = draggingLineIndex === i && draggingLineType === 'vertical';\n                return (\n                  <div key={`v-${i}`}>\n                    <div\n                      className={`overlay-line vertical-line ${isDragging ? 'dragging' : ''}`}\n                      style={{ \n                        left: lineData.x * videoBounds.scaleX,\n                        top: lineData.y1 * videoBounds.scaleY,\n                        height: (lineData.y2 - lineData.y1) * videoBounds.scaleY,\n                        cursor: isDragging && draggingLinePart === 'position' ? 'ew-resize' : 'default'\n                      }}\n                    />\n                    {/* Start endpoint (top) */}\n                    <div\n                      className={`line-endpoint line-endpoint-start ${isDragging && draggingLinePart === 'start' ? 'dragging' : ''}`}\n                      style={{\n                        left: lineData.x * videoBounds.scaleX - 5,\n                        top: lineData.y1 * videoBounds.scaleY - 5,\n                        cursor: 'ns-resize',\n                        zIndex: 25\n                      }}\n                    />\n                    {/* End endpoint (bottom) */}\n                    <div\n                      className={`line-endpoint line-endpoint-end ${isDragging && draggingLinePart === 'end' ? 'dragging' : ''}`}\n                      style={{\n                        left: lineData.x * videoBounds.scaleX - 5,\n                        top: Math.min(lineData.y2 * videoBounds.scaleY - 5, videoBounds.height - 5),\n                        cursor: 'ns-resize',\n                        zIndex: 25,\n                        position: 'absolute'\n                      }}\n                    />\n                  </div>\n                );\n              })}\n              \n              {/* Preview line while creating new line */}\n              {creatingLine && newLinePreview && newLineType && (\n                <>\n                  {newLineType === 'horizontal' && newLinePreview.y !== undefined && (\n                    <>\n                      <div\n                        className=\"overlay-line horizontal-line creating\"\n                        style={{ \n                          top: newLinePreview.y * videoBounds.scaleY,\n                          left: (newLinePreview.x1 || 0) * videoBounds.scaleX,\n                          width: ((newLinePreview.x2 || videoDimensions.width) - (newLinePreview.x1 || 0)) * videoBounds.scaleX,\n                        }}\n                      />\n                      <div\n                        className=\"line-endpoint line-endpoint-start creating\"\n                        style={{\n                          left: (newLinePreview.x1 || 0) * videoBounds.scaleX - 4,\n                          top: newLinePreview.y * videoBounds.scaleY - 4,\n                        }}\n                      />\n                      <div\n                        className=\"line-endpoint line-endpoint-end creating\"\n                        style={{\n                          left: (newLinePreview.x2 || videoDimensions.width) * videoBounds.scaleX - 4,\n                          top: newLinePreview.y * videoBounds.scaleY - 4,\n                        }}\n                      />\n                    </>\n                  )}\n                  {newLineType === 'vertical' && newLinePreview.x !== undefined && (\n                    <>\n                      <div\n                        className=\"overlay-line vertical-line creating\"\n                        style={{ \n                          left: newLinePreview.x * videoBounds.scaleX,\n                          top: (newLinePreview.y1 || 0) * videoBounds.scaleY,\n                          height: ((newLinePreview.y2 || videoDimensions.height) - (newLinePreview.y1 || 0)) * videoBounds.scaleY,\n                        }}\n                      />\n                      <div\n                        className=\"line-endpoint line-endpoint-start creating\"\n                        style={{\n                          left: newLinePreview.x * videoBounds.scaleX - 4,\n                          top: (newLinePreview.y1 || 0) * videoBounds.scaleY - 4,\n                        }}\n                      />\n                      <div\n                        className=\"line-endpoint line-endpoint-end creating\"\n                        style={{\n                          left: newLinePreview.x * videoBounds.scaleX - 4,\n                          top: (newLinePreview.y2 || videoDimensions.height) * videoBounds.scaleY - 4,\n                        }}\n                      />\n                    </>\n                  )}\n                </>\n              )}\n            </div>\n          )}\n\n          {/* Drag-based cropping */}\n          {dragEnabled && (\n            <div\n              className=\"drag-overlays\"\n              style={{\n                left: videoBounds.x,\n                top: videoBounds.y,\n                width: videoBounds.width,\n                height: videoBounds.height\n              }}\n            >\n              {dragRegions.map((r, i) => (\n                <div\n                  key={i}\n                  className=\"drag-region\"\n                  style={{\n                    left: r.x * videoBounds.scaleX,\n                    top: r.y * videoBounds.scaleY,\n                    width: r.width * videoBounds.scaleX,\n                    height: r.height * videoBounds.scaleY\n                  }}\n                  onContextMenu={e => {\n                    e.preventDefault();\n                    removeDragRegion(i);\n                  }}\n                >\n                  <div className=\"drag-region-label\">{i + 1}</div>\n                </div>\n              ))}\n\n              {isDragging && currentDrag && (\n                <div\n                  className=\"drag-region dragging\"\n                  style={{\n                    left: currentDrag.x * videoBounds.scaleX,\n                    top: currentDrag.y * videoBounds.scaleY,\n                    width: currentDrag.width * videoBounds.scaleX,\n                    height: currentDrag.height * videoBounds.scaleY\n                  }}\n                />\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(VideoPreviewComponent);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}